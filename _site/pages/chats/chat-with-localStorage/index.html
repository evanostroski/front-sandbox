<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
        <title>Evan&#39;s Front Sandbox - Chat with visual state via localStorage</title>
    
    
        <meta name="description" content="Chat functionality with visual state persisted in localStorage">
    
    <link rel="stylesheet" href="/assets/main.css">
</head>
<body class="fox">
<div class="container-fluid">
    <div class="row p-1">
        <a href="/index.html">Home</a>&nbsp;| Chat with visual state via localStorage
    </div>
</div>

<div class="container-fluid fox">
    <div class="row px-3 py-2">
        <h4 class="display-4">Front Chat</h4>
    </div>
    <div class="row px-5">
        
            <h4>Chat functionality with visual state persisted in localStorage</h4>
        
    </div>
    <hr>
    <div class="row my-3">
        <div class="col-md-5 m-3 p-3 rounded-lg sand">
            <h4>Help Center links:</h4>
            <p>
                <ul>
                    <li><a href="https://dev.frontapp.com/docs/chat-overview">
                        Front Chat Widget developer documentation
                    </a></li>
                    <li><a href="https://help.frontapp.com/t/x129aq/how-to-set-up-a-front-chat-inbox-in-front">
                        How to set up a Front Chat inbox in Front
                    </a></li>
                    <li><a href="https://help.frontapp.com/t/80290v/using-front-chat">
                        Using Front Chat
                    </a></li>
                    <li><a href="https://help.frontapp.com/t/y72vr5/recognize-logged-in-users-with-front-chat-identity-verification">
                        Recognize logged in users with Front Chat identity verification
                    </a></li>
                    <li><a href="https://dev.frontapp.com/docs/chat-sdk-reference#identity-verification">
                        userHash algorithm
                    </a></li>
                </ul>
            </p>
        </div>
        <div class="col-md-5 p-3">
            <button onclick="initMaximized()">Init chat Maximimized with localStorage</button>
<button onclick="shutdown()">Shutdown Chat with localStorage</button>

<script src="https://chat-assets.frontapp.com/v1/chat.bundle.js"></script>
<script>
  const STATUS = {
    NOT_INITIALIZED: 'NOT_INITIALIZED',
    INIT_HIDDEN: 'INIT_HIDDEN',
    INIT_MINIMIZED: 'INIT_MINIMIZED',
    INIT_MAXIMIZED: 'INIT_MAXIMIZED',
  }

  let currentStatus = localStorage.getItem('chatStatus') || STATUS.NOT_INITIALIZED;
  switch (currentStatus) {
    case STATUS.INIT_MINIMIZED:
      window.FrontChat('init', {
        chatId: 'cc6cd1eb09b189fa6a6f8a2c0cd0d63c', 
        useDefaultLauncher: true,
        shouldShowWindowOnLaunch: false});
      break;
    case STATUS.INIT_MAXIMIZED:
      window.FrontChat('init', {
        chatId: 'cc6cd1eb09b189fa6a6f8a2c0cd0d63c', 
        useDefaultLauncher: true,
        shouldShowWindowOnLaunch: true});
      break;
    case STATUS.INIT_HIDDEN:
      window.FrontChat('init', {chatId: 'cc6cd1eb09b189fa6a6f8a2c0cd0d63c', useDefaultLauncher: false});
      break;
    case STATUS.NOT_INITIALIZED:
      // Nothing to do except ensure the status is set in localStorage
      localStorage.setItem('chatStatus', STATUS.NOT_INITIALIZED);
  }
  const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))

  function initMaximized() {
    localStorage.setItem('chatStatus', STATUS.INIT_MAXIMIZED);
    window.FrontChat('init', {
      chatId: 'cc6cd1eb09b189fa6a6f8a2c0cd0d63c', 
      useDefaultLauncher: true,
      shouldShowWindowOnLaunch: true});
  }

  function shutdown() {
    localStorage.setItem('chatStatus', STATUS.NOT_INITIALIZED);
    window.FrontChat('shutdown');
  }
</script>      
        </div>
    </div>
    <hr>
    <div class="row p-3">
        <button onclick="window.FrontChat('shutdown')">Shutdown</button>
        <button onclick="window.FrontChat('shutdown', {clearSession: true})">Clear session</button>
        <button onclick="window.FrontChat('show')">Show</button>
        <button onclick="window.FrontChat('hide')">Hide</button>
    </div>
    <div class="row p-3">
        
        
<div class="container-fluid">
    <div class="row py-2">
        <h3>Code used on this page:</h3>
    </div>
    <div class="row px-3 py-2">
        <pre class="pre-scrollable text-light bg-dark m-3 p-3">
&lt;button onclick=&quot;initMaximized()&quot;&gt;Init chat Maximimized with localStorage&lt;/button&gt;
&lt;button onclick=&quot;shutdown()&quot;&gt;Shutdown Chat with localStorage&lt;/button&gt;

&lt;script src=&quot;https://chat-assets.frontapp.com/v1/chat.bundle.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  const STATUS = {
    NOT_INITIALIZED: &#39;NOT_INITIALIZED&#39;,
    INIT_HIDDEN: &#39;INIT_HIDDEN&#39;,
    INIT_MINIMIZED: &#39;INIT_MINIMIZED&#39;,
    INIT_MAXIMIZED: &#39;INIT_MAXIMIZED&#39;,
  }

  let currentStatus = localStorage.getItem(&#39;chatStatus&#39;) || STATUS.NOT_INITIALIZED;
  switch (currentStatus) {
    case STATUS.INIT_MINIMIZED:
      window.FrontChat(&#39;init&#39;, {
        chatId: &#39;cc6cd1eb09b189fa6a6f8a2c0cd0d63c&#39;, 
        useDefaultLauncher: true,
        shouldShowWindowOnLaunch: false});
      break;
    case STATUS.INIT_MAXIMIZED:
      window.FrontChat(&#39;init&#39;, {
        chatId: &#39;cc6cd1eb09b189fa6a6f8a2c0cd0d63c&#39;, 
        useDefaultLauncher: true,
        shouldShowWindowOnLaunch: true});
      break;
    case STATUS.INIT_HIDDEN:
      window.FrontChat(&#39;init&#39;, {chatId: &#39;cc6cd1eb09b189fa6a6f8a2c0cd0d63c&#39;, useDefaultLauncher: false});
      break;
    case STATUS.NOT_INITIALIZED:
      // Nothing to do except ensure the status is set in localStorage
      localStorage.setItem(&#39;chatStatus&#39;, STATUS.NOT_INITIALIZED);
  }
  const sleep = (delay) =&gt; new Promise((resolve) =&gt; setTimeout(resolve, delay))

  function initMaximized() {
    localStorage.setItem(&#39;chatStatus&#39;, STATUS.INIT_MAXIMIZED);
    window.FrontChat(&#39;init&#39;, {
      chatId: &#39;cc6cd1eb09b189fa6a6f8a2c0cd0d63c&#39;, 
      useDefaultLauncher: true,
      shouldShowWindowOnLaunch: true});
  }

  function shutdown() {
    localStorage.setItem(&#39;chatStatus&#39;, STATUS.NOT_INITIALIZED);
    window.FrontChat(&#39;shutdown&#39;);
  }
&lt;/script&gt;
        </pre>
    </div>
</div>
    </div>
</div>
<script src="/assets/main.js"></script>
</body>
</html>

