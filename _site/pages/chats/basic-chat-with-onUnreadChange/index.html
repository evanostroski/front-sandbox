<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
        <title>Evan&#39;s Front Sandbox - Basic chat with an onUnreadChange handler</title>
    
    
        <meta name="description" content="Basic chat functionality with an onUnreadChange handler.  Send a message to start automated replies that will increment the counter.">
    
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body class="fox">
<div class="container-fluid">
    <div class="row p-1">
        <a href="/index.html">Home</a>&nbsp;| Basic chat with an onUnreadChange handler
    </div>
</div>

<div class="container-fluid fox">
    <div class="row px-3 py-2">
        <h4 class="display-4">Front Chat</h4>
    </div>
    <div class="row px-5">
        
            <h4>Basic chat functionality with an onUnreadChange handler.  Send a message to start automated replies that will increment the counter.</h4>
        
    </div>
    <hr>
    <div class="row my-3">
        <div class="col-md-5 m-3 p-3 rounded-lg sand">
            <h4>Help Center links:</h4>
            <p>
                <ul>
                    <li><a href="https://dev.frontapp.com/docs/chat-overview">
                        Front Chat Widget developer documentation
                    </a></li>
                    <li><a href="https://help.frontapp.com/t/x129aq/how-to-set-up-a-front-chat-inbox-in-front">
                        How to set up a Front Chat inbox in Front
                    </a></li>
                    <li><a href="https://help.frontapp.com/t/80290v/using-front-chat">
                        Using Front Chat
                    </a></li>
                    <li><a href="https://help.frontapp.com/t/y72vr5/recognize-logged-in-users-with-front-chat-identity-verification">
                        Recognize logged in users with Front Chat identity verification
                    </a></li>
                    <li><a href="https://dev.frontapp.com/docs/chat-sdk-reference#identity-verification">
                        userHash algorithm
                    </a></li>
                </ul>
            </p>
        </div>
        <div class="col-md-5 p-3">
            Unread Counter: <span id="counter">0</span>

<script src="https://chat-assets.frontapp.com/v1/chat.bundle.js"></script>
<script>
  const sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))
  window.FrontChat('init', {chatId: 'cc6cd1eb09b189fa6a6f8a2c0cd0d63c', useDefaultLauncher: true});
  const registerHandler = async () => {
    await sleep(1000)
    window.FrontChat('onUnreadChange', function (event) {
      let counter = document.getElementById('counter');
      counter.innerHTML = event.unread_count;
    });  
  }
  registerHandler();
</script>      
        </div>
    </div>
    <hr>
    <div class="row p-3">
        <button onclick="window.FrontChat('shutdown')">Shutdown</button>
        <button onclick="window.FrontChat('shutdown', {clearSession: true})">Clear session</button>
        <button onclick="window.FrontChat('show')">Show</button>
        <button onclick="window.FrontChat('hide')">Hide</button>
    </div>
    <div class="row p-3">
        
        
<div class="container-fluid">
    <div class="row py-2">
        <h3>Code used on this page:</h3>
    </div>
    <div class="row px-3 py-2">
        <pre class="pre-scrollable text-light bg-dark m-3 p-3">
Unread Counter: &lt;span id=&quot;counter&quot;&gt;0&lt;/span&gt;

&lt;script src=&quot;https://chat-assets.frontapp.com/v1/chat.bundle.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  const sleep = (delay) =&gt; new Promise((resolve) =&gt; setTimeout(resolve, delay))
  window.FrontChat(&#39;init&#39;, {chatId: &#39;cc6cd1eb09b189fa6a6f8a2c0cd0d63c&#39;, useDefaultLauncher: true});
  const registerHandler = async () =&gt; {
    await sleep(1000)
    window.FrontChat(&#39;onUnreadChange&#39;, function (event) {
      let counter = document.getElementById(&#39;counter&#39;);
      counter.innerHTML = event.unread_count;
    });  
  }
  registerHandler();
&lt;/script&gt;
        </pre>
    </div>
</div>
    </div>
</div>
<script src="/assets/js/main.js"></script>
</body>
</html>

